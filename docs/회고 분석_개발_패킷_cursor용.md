# AI 회고 분석 서비스 – 개발 패킷 (Cursor용)

본 문서는 Cursor에서 바로 개발 착수할 수 있도록 **PRD → 설계 → 스펙 → 샘플 I/O → 테스트**까지 한 번에 담은 실행 패킷입니다. 목표는 “민영이 제공한 예시 출력과 **완전히 동일한 형식**”으로 결과가 나오도록 하는 것입니다.

---

## 0) 범위 요약 (MVP 스코프)
- 입력: 사용자의 **주간 회고 원문 텍스트**
- 출력: **두 개의 탭**
  1) **서술형 탭**: 섹션(수면/면접/운동/독서 등)별로 자연스럽게 다듬은 본문 + **개선 포인트** 리스트
  2) **분석 탭**: 아래 고정 섹션 순서/형식 엄수
     - 1. 핵심 요약 카드 (🎭 캐릭터명 + 한 줄 요약)
     - 2. 삶의 영역 점수 (일·건강·관계·수면… 10점 만점)
     - 3. 개선 포인트 (To-Do) – 실행 문장체
     - 4. 인사이트 – 숨겨진 패턴/가정 시뮬레이션/자기 설명
     - 5. 코칭 멘트 – **ST(현실적 조언)** & **NF(공감 멘토)** 병기
     - 6. 주간 발굴 노트 – ⭐ 모멘트/📚 교훈/💡 아이디어/💬 문장/❤️ 감정
     - 7. 장기 추적 지표 – 수면/운동/이직/독서 등 숫자화
     - 8. 1문 1답 – Q, A 각 3세트 이하
     - 9. 회고글에 맞는 명언 – 출처 포함
     - 10. AI 응원 멘트 – 동료 톤 짧은 문단
     - 11. 한 줄 선언 – 따옴표 포함

---

## 16) 샘플 입력 & 출력 (픽스처)

### retro1.txt (사용자 원문)
```
이번주 평일 밤수면 시간 5시간..! 지난주 보다 좀 나아졌다. 6시간 잔 날이 두번이나 있음... (민영 제공 원문 전체)
```

### retro1.narrative.json (서술형 탭 예시)
```json
{
  "sections": [
    {
      "title": "🌙 수면과 체력",
      "body": "이번 주 평일 평균 수면 시간은 약 5시간. 지난주보다 조금 나아졌고, 6시간 잔 날도 두 번 있었다. 점심 낮잠을 30분으로 제한한 게 효과가 있었다.",
      "improvements": ["밤 최소 6시간 확보", "낮잠 30분 제한 유지"]
    },
    {
      "title": "🎤 첫 면접 경험",
      "body": "금요일, 쉬려고 낸 연차가 면접일이 되었다. 4년 만의 면접이라 떨렸지만, 내 포트폴리오에 흥미를 느꼈다는 말에 감동을 받았다. 다소 겸손하게 답변했지만 자신감 있게 어필할 필요를 느꼈다.",
      "improvements": ["자신감 있게 포트폴리오 장점 어필", "출퇴근 조건 현실적으로 점검", "합불 모두 연습으로 받아들이기"]
    }
  ]
}
```

### retro1.analysis.json (분석 탭 예시)
```json
{
  "summary_card": {
    "character": "흔들리면서도 앞으로 나아가는 연습생",
    "one_liner": "면접, 운동, 독서 속에서 ‘포장’과 ‘자신감’을 배우다"
  },
  "tags": ["면접과 자기 표현", "운동의 꾸준함", "포트폴리오와 포장", "수면 부족"],
  "emotion_tags": ["#긴장", "#자극", "#자존감", "#위로"],
  "hidden_theme": "나는 나를 증명해야 한다는 압박감과, 그럼에도 있는 그대로의 나를 존중하려는 마음",
  "life_scores": {"work": 6.5, "health": 7, "relationships": 7.5, "sleep": 4},
  "todos": [
    "포트폴리오 초안 수요일까지 완성, 금요일 1곳 지원",
    "러닝 6km 도전, 헬스 주 2회 유지",
    "23:30 이전 취침, 낮잠 30분 제한",
    "트레바리에서 실시간 타이핑 기록"
  ],
  "insights": {
    "patterns": ["‘증명’ 부담과 ‘포장 거부감’ 반복"],
    "simulations": ["면접에서 과감한 자신감 → 더 강한 인상 가능"],
    "self_explainer": "스스로를 평범하게 포장하는 습관이 있으나, 정직+매력 포장을 탐색 중"
  },
  "coaching": {
    "ST": "포트폴리오 구조화 수요일까지, 금요일 지원 1곳. 23:30 취침 리듬 고정.",
    "NF": "긴장과 아쉬움은 성장의 증거. 이제는 ‘멋지게 보여도 괜찮다’는 마음을 허락하라."
  },
  "weekly_notes": {
    "moments": ["4년 만의 첫 면접", "5.5km 러닝 완주"],
    "lessons": ["평범해 보여도 강점이 될 수 있음"],
    "ideas": ["포트폴리오를 ‘정직+포장’ 균형 구조로"],
    "quotes": ["선물은 예쁘게 포장하면서 왜 나 자신을 포장하는 건 창피할까?"],
    "feelings": ["MSG 못 넣은 아쉬움", "운동 성취의 뿌듯함"]
  },
  "long_term_metrics": {
    "sleep_avg_hours": 5,
    "workouts": {"gym": 2, "run": 1, "climb": 1},
    "job_activity": {"portfolio": "미완", "interviews": 1},
    "reading_talk": 1
  },
  "qa": [
    {"q": "다음 주에 가장 먼저 시도할 건?", "a": "포트폴리오 구조 뜯어고치기"},
    {"q": "이번 주 가장 뿌듯했던 순간?", "a": "러닝 5.5km 완주"}
  ],
  "quote": {"text": "성공은 준비와 기회의 만남이다.", "author": "세네카"},
  "support": "민영, 이번 주는 ‘시도’가 많았네. 아쉬움도 성장 중이라는 증거야.",
  "declaration": "나는 더 멋지게 보여도 괜찮다."
}
```

---

## 17) 테스트 전략
- `/__fixtures__/retro1.txt` → 입력
- `/__fixtures__/retro1.narrative.json` & `/__fixtures__/retro1.analysis.json` → 기대 출력
- Jest 스냅샷 테스트: 섹션/키/순서 검증
- Playwright E2E: UI 탭 전환, 섹션 헤더/이모지 노출 검증

---

👉 이 픽스처 세트를 활용하면 **“예시와 같은 출력 형식”**이 재현되는지 자동 검증 가능!


---

## 21) 테스트 픽스처 세트 (fixtures)
아래 내용을 그대로 파일로 저장해 사용하세요.

### 21.1 `/__fixtures__/retro1.txt`
```
- 이번주 평일 밤수면 시간 5시간..! 지난주 보다 좀 나아졌다. 6시간 잔 날이 두번이나 있음. 점심시간 낮잠을 30분으로 제한한게 살짝 효과가 있었는듯 조금씩 줄이고.. 차라리 점심시간을 잘 활용할수있으면 좋겠다. 일단 이번주도 밤 수면시간 6시간 이상이 목표. 낮잠 30분 제한도 유지하기 - 금요일에 그냥 쉬고 싶어서 연차를 썼었는데 갑자기 면접이 잡혀서 금요일 오전에 면접을 보고 왔다. 늘 내가 부족하지 않나 라고 생각했는데 디자인리더분이 내 포폴을 보시고 흥미롭게 보신 부분들이 있어서 면접을 잡았다는 말에 살짝 감동.. 사실 지금이 다니는 회사가 첫회사이고.. 그때 본 면접이 마지막이였으니까 면접이라는걸 본지가 4년이 훌쩍 넘은건데 아무래도 경력 면접이여서 좀 더 겸손하게 대답을 했던거같은데 보고 나서 아.. 살짝 MSG를 좀 더 쳐볼걸 그랬나 싶었다. 난 내가 가진 능력이 평범하다 생각해서 이걸 강조하는게 뭔가 너무 당연한걸 강조하는거같아서 낯설어 했는데, 다른 분은 그걸 강점으로 보거나 흥미롭게 봐주시는게 신기하기도 했다. 스타트업이라 좀 더 열심히 일할수 있는 사람을 바라는것 같았고 퍼포먼스를 내기 위해 야근도 기꺼이 할 수 있는 사람을 바라는것 같았다. 음.. 진지하게 내가 할수있나? 라고 생각했을때.. 지금 이시기가 내 연차에서 중요한 시기이니까 나의 지금 안정된 생활을 살짝 양보할 수 있지 않을까 라는 생각이 들기도 했다. 좀 더 강력하게 어필했어야했나 라는 생각도 들고 열정이라는게 신입..때만 먹히는거 아닌가? 했는데 포트폴리오를 넘어선 일에 대한 태도에 관한 건 좀 더 적극적으로 어필할 필요가 있다.. 라는 생각을 방금 글을 쓰면서 했다. 안해봐도 못해도 그냥 할수있다고 할걸 그랬나.. 하지만 그 자신감이 가짜라면,,? 아이 그러면 뽑은 사람 탓을 해야하나. ㅋㅋㅋ 첫 면접이라서 무슨말해야할지도 모르고.. 많은 부분이 어설펐던거같은데 아무쪼록 합격한다면 갈까 말까 고민하는 상황이 왔으면 좋겠다가도 집이랑 출퇴근이 멀어져서 내가 잘 다닐수있을까 걱정이 되면서도.. 첫술에 배부를수 펐던거같은데 아무쪼록 합격한다면 갈까 말까 고민하는 상황이 왔으면 좋겠다가도 집이랑 출퇴근이 멀어져서 내가 잘 다닐수있을까 걱정이 되면서도.. 탈락하더라도 너무 크게 상심하지 말자. 더 좋은 기회가 오려고 이러는거겠지 하면서 했다가… 서류 넣을땐 그냥 음.. 나쁘지 않아보이는데 한번 넣어볼까 가벼운 마음이였는데 면접 준비하고 막상 지하철역 내려서는 얼마나 떨리던지! 이 회사에 진심으로 다니고 싶은 기대감인지 아니면 그저 타인에게 나의 지난 경력을 판단받는 다는것이 떨린다는 것이 헷갈렸다. 면접은 총 두시간 걸렸지만 집에 와서는 점심을 먹고 오후 내내 낮잠을 잤다. 별로 안피곤했던거같은데. 면접 한번에 이렇게 피로할줄이야..! 겨우 두시간이였는데..! ㅠㅠ 마음속으로는 올해 안에 100곳 지원 면접 10곳 합격 5곳 이런 시나리오 생각하고 있었는데.. 생각보다 면접이 너무 피곤하고 귀찮아서 그냥 여기 합격하면 다니고 싶은 마음이 있다..ㅋㅋㅋ ㅠ 이번주는 면접 핑계로 포폴에 대해서 아무것도 손보지도 않았다. 담주부터 다시 해야지 - 헬스 2회 러닝 1회 클라이밍 1회 러닝 5.5km달성..! 물론 1키로 정도는 걸은것같지만. 러닝하면서 한 생각 : 체력이 좋으면 더 먼곳을 갈 수 있다. 천천히 달리면 오히려 쉬지 않고 오래 갈수 있다. 천천히 걷더라도 목표만 있으면 도달할 수 있다. 3주전에 클라이밍 했다가 오랜만에 하는거였는데 재밌었고.. 이번에 살짝 피부 쓸린곳이 많아서 흉질까봐 걱정된다. 클라이밍은 재밌는데 승부욕에 다치기 쉬운 운동이라 조심해야한다. 이번엔 몸을 잘써서 등도 같이 운동되면 좋겠다! 했는데 막상 하니까 잘안되어서 음.. 상체운동 하러 가야지~~했다가 집에 와서 기절했다. 그리고 다음날 내내 전완근이 아팠다. 몸을 조금 더 잘쓰면 등이랑 전신이 아프다고 하는데 아직 기술과 요령이 없어서 팔만 아픈거같다. 러닝, 클라이밍 하면서 느낀 공통사는 러닝은 사실 처음엔 3키로도 중간에 엄청 많이 쉬고 했었는데 이제는 3키로는 쉬지 않고 뛸수 있게 되었다. 클라이밍도 처음엔 가기 힘들었던 돌맹이(?)가 한번 닿이고 나면 거기까지 도달하는건 쉬워진다. 점점 조금씩 할 수록 는다. - 이번주에도 많은 좋은 컨텐츠를 공유 받았다. 건강한 사고를 가진 사람들과 하는 이야기들은 좋은 영감을 준다. 내면성장, 명상, 우리가 사랑할 때 물어야 할 여덟 가지, 불안의 서. 등등 추천받은 책들과 컨텐츠가 쌓여간다……… - 이번주 트레바리를 갔다왔는데 카피라이팅에 관련된 책이였다. 사실 기술서? 같은거라 되게 재미없게 읽었는데 그래도 나름 하이라이팅도 하면서 독후감을 썼었다. 독후감에 ‘포트폴리오 작업을 하며 “나를 포장하는 일”에 거부감을 느끼곤 했다. 선물은 예쁘게 포장하면서, 왜 나 자신을 포장하는 건 낯간지럽고 쑥스럽고 심지어 창피하게 느껴질까.‘라는 문장을 썼는데 많은 사람들이 공감해 주었다. 여기에 대해서 누군가 빈수레니까 요란하다.라는 말을 해주셨는데 그 말이 생각보다 위로가 많이 되었고 좀 더 자신감 있게 보기좋게 포장해도 괜찮겠다 라는 자신감이 들었다. 음..트레바리 갈때마다 그냥 빈손으로 갔었는데 전체 글을 노트북으로 타이핑 하면서 듣는 분이 있었는데 다음부턴 타이핑을 해볼까 싶기도 하다. 노트북으로 타닥타닥 하는게 조금 불편하지 않나 생각했는데.. 아니면 다른사람들의 말을 메모를 잘하는 습관을 가져야겠다. 재미없다고 생각했던 책도 의미 없었다고 생각했던 시간들도 나에게 필요없어 보이는 것들도 언제인가 어디에서인가 다 나에게 필요가 있다. 내 인생에 일어나는 일과 사람을 해석하는 건 오로지 몫이다. 다양한 사람과 다양한 경험을 해보면서 내 인생에 수많은 점을 찍고 있다는 생각을 하는 요즘이다.
```

### 21.2 `/__fixtures__/retro1.narrative.json`
```json
{
  "sections": [
    {
      "title": "🌙 수면과 체력",
      "body": "이번 주 평일 평균 수면 시간은 약 5시간. 지난주보다 조금 나아졌고, 6시간 잔 날도 두 번 있었다. 점심 낮잠 30분 제한이 어느 정도 효과가 있었다. 앞으로 낮잠을 줄이고 점심시간을 더 효과적으로 활용해 컨디션을 관리하자. 이번 주 목표는 밤 수면 6시간 이상과 낮잠 30분 제한 유지다.",
      "improvements": [
        "밤 최소 6시간 확보",
        "낮잠 30분 제한 유지"
      ]
    },
    {
      "title": "🎤 첫 면접 경험",
      "body": "금요일 연차가 갑작스런 면접일이 되었다. 디자인 리더가 포트폴리오에서 흥미로운 부분을 발견했다는 말에 자신감을 얻었다. 4년 만의 면접이라 긴장했고, 경력 면접 특성상 겸손에 치우쳤다는 아쉬움이 남았다. 출퇴근 거리 등 현실 조건과 함께, 태도와 자신감의 어필을 강화할 필요를 느꼈다.",
      "improvements": [
        "포트폴리오 강점과 태도를 자신감 있게 어필",
        "출퇴근·근무환경 등 현실 조건 사전 점검",
        "합불 결과를 ‘연습’으로 프레이밍"
      ]
    },
    {
      "title": "🏃 운동과 몸",
      "body": "헬스 2회, 러닝 1회, 클라이밍 1회. 러닝 5.5km 달성(중간 1km 보행). 예전엔 3km도 쉬었지만 이제는 쉬지 않고 3km 달리기가 가능하다. 클라이밍은 재미있었지만 전완근만 혹사되는 느낌이라 기술을 더 익힐 필요가 있다. 반복을 통해 한 번 도달한 지점은 다음에 더 쉬워진다는 걸 체감했다.",
      "improvements": [
        "러닝 6km 도전",
        "클라이밍에서 등/상체 활용 기술 연습",
        "웨이트 주 2회 이상 유지"
      ]
    },
    {
      "title": "📖 책과 대화",
      "body": "트레바리에서 카피라이팅 기술서를 다뤘다. ‘나를 포장하는 일’에 대한 거부감이 공감을 얻었고, ‘빈 수레가 요란하다’는 피드백이 의외의 위로가 되었다. 보기 좋게 포장하는 용기의 필요성을 깨달았다. 다음 모임부터는 실시간 타이핑/메모 습관을 들여 인사이트를 더 촘촘히 남기자.",
      "improvements": [
        "트레바리 피드백을 포트폴리오 표현에 적용",
        "모임에서 실시간 메모 루틴화"
      ]
    }
  ]
}
```

### 21.3 `/__fixtures__/retro1.analysis.json`
```json
{
  "summary_card": {
    "character": "흔들리면서도 앞으로 나아가는 연습생",
    "one_liner": "면접, 운동, 독서 속에서 ‘포장’과 ‘자신감’을 배우다"
  },
  "tags": ["면접과 자기 표현", "운동의 꾸준함", "포트폴리오와 포장", "수면 부족"],
  "emotion_tags": ["#긴장", "#자극", "#자존감", "#위로"],
  "hidden_theme": "나는 나를 증명해야 한다는 압박감과, 그럼에도 있는 그대로의 나를 존중하려는 마음",
  "life_scores": { "work": 6.5, "health": 7, "relationships": 7.5, "sleep": 4 },
  "todos": [
    "포트폴리오 초안 수요일까지 완성하고 금요일 최소 1곳 지원",
    "러닝 6km 도전하고 헬스 주 2회 이상 유지",
    "23:30 이전 취침, 낮잠 30분 제한 유지",
    "트레바리에서 실시간 타이핑으로 기록"
  ],
  "insights": {
    "patterns": ["‘증명’ 부담과 ‘포장 거부감’의 반복"],
    "simulations": ["면접에서 과감한 자신감 어필 → 더 강한 인상 가능"],
    "self_explainer": "스스로를 평범하게 포장하는 습관이 있으나, ‘정직+매력 포장’ 균형을 탐색 중"
  },
  "coaching": {
    "ST": "수요일까지 포트폴리오 골조를 고정하고 금요일 지원 1건을 루틴화하세요. 취침 앵커를 23:30으로 고정하세요.",
    "NF": "긴장과 아쉬움은 성장의 증거예요. 이번 주에 이미 해낸 시도들을 스스로 인정해 주세요. ‘나는 더 멋지게 보여도 괜찮다.’"
  },
  "weekly_notes": {
    "moments": ["4년 만의 면접에서 들은 긍정 피드백", "러닝 5.5km 완주"],
    "lessons": ["평범해 보여도 타인에겐 강점일 수 있다", "꾸준함이 체력을 만든다"],
    "ideas": ["포트폴리오 서술 구조를 ‘정직+포장’ 균형으로 재설계"],
    "quotes": ["선물은 예쁘게 포장하면서 왜 나 자신을 포장하면 창피할까?"],
    "feelings": ["MSG를 못 넣은 아쉬움", "운동 성취의 뿌듯함", "대화에서 얻은 위로"]
  },
  "long_term_metrics": {
    "sleep_avg_hours": 5,
    "workouts": { "gym": 2, "run": 1, "climb": 1 },
    "job_activity": { "portfolio": "미완", "interviews": 1 },
    "reading_talk": 1
  },
  "qa": [
    { "q": "다음 주에 가장 먼저 시도할 건?", "a": "포트폴리오 구조 뜯어고치기" },
    { "q": "이번 주 가장 뿌듯했던 순간은?", "a": "러닝 5.5km 완주" },
    { "q": "이번 주에 나를 가장 흔든 감정은?", "a": "‘평범함도 강점이 될 수 있다’는 깨달음에서 온 놀라움" }
  ],
  "quote": { "text": "성공은 준비와 기회의 만남이다.", "author": "세네카" },
  "support": "민영, 이번 주는 시도가 많았고 그 자체로 충분히 값졌어. 다음엔 더 편하게 할 수 있을 거야.",
  "declaration": "나는 더 멋지게 보여도 괜찮다."
}
```

---

## 22) 스냅샷 테스트 예시 (Jest)
```
import fs from 'node:fs';
import path from 'node:path';
import { analyze } from '@/lib/analyze';

const fx = (p: string) => fs.readFileSync(path.join(__dirname, '..', '__fixtures__', p), 'utf8');

describe('analyze API', () => {
  it('retro1 구조 검증', async () => {
    const raw = fx('retro1.txt');
    const res = await analyze(raw);
    const narrative = JSON.parse(fx('retro1.narrative.json'));
    const analysis = JSON.parse(fx('retro1.analysis.json'));

    // 필수 키 존재 & 타입 검사 (내용 100% 일치 강제하지 않음)
    expect(Array.isArray(res.narrative.sections)).toBe(true);
    expect(res.analysis.summary_card.character).toBeTruthy();
    expect(res.analysis.life_scores.work).toBeGreaterThanOrEqual(0);

    // 섹션명/순서 최소 검증
    expect(res.analysis.qa.length).toBeGreaterThan(0);
    expect(res.analysis.declaration).toMatch(/"?.+"?/);
  });
});
```

